{"version":3,"sources":["icons/spotify.png","components/HomePage.js","icons/skip-track.png","components/Music.js","icons/pause.png","icons/play.png","App.js","icons/logout.png","reportWebVitals.js","index.js"],"names":["HomePage","className","onClick","this","props","login","src","spotifylogo","alt","Component","Music","getPlayingLyrics","setState","state","lyrics","axios","get","params","token","localStorage","getItem","then","res","data","catch","error","console","log","getPlaying","status","artists","map","artist","song_title","song_duration","song_progress","album_img_url","is_playing","getAndCheckToken","skipTrack","type","post","setTimeout","window","alert","pauseTrack","put","renderLine","line","includes","style","lineHeight","replace","renderArtists","str","forEach","a","index","renderPauseIcon","lyricsRef","React","createRef","progressBarRef","progressBarFilledRef","refreshInterval","setInterval","durationInterval","current","value","width","innerWidth","songPercent","newScrollTop","scrollHeight","innerHeight","Math","abs","scrollTop","scrollTo","top","left","behavior","clearInterval","loading","ref","skiptrack","min","max","App","authenticated","refresh_token","getTokenByRefresh","code","location","search","slice","getTokenByCode","setItem","href","clear","url","logout","renderLogout","redirect","to","path","component","bind","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.958bf3bf.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/spotify.0c4ae91b.png\";","import React, { Component } from 'react'\r\n\r\nimport './css/homepage.css'\r\nimport spotifylogo from '../icons/spotify.png'\r\n\r\nexport class HomePage extends Component {\r\n    render() {\r\n        return (\r\n            <div className='home'>\r\n                <div className='info'>\r\n                    <h1> Spotify Lyrics</h1>\r\n                    <p className='desc'> What is Spotify Lyrics? Well, its pretty simple. Spotify Lyrics is an app which syncs with your \r\n                        spotify account and displays lyrics in realtime for you. Start by logging in with Spotify!\r\n                    </p>\r\n                    <p className=\"btntag\">Login with: </p>\r\n                    <button className=\"loginbtn\" onClick={this.props.login}>\r\n                        <img src={spotifylogo} alt=''></img>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default HomePage\r\n","export default \"data:image/png;base64,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\"","import React, { Component } from 'react'\r\n\r\nimport music from './css/music.css'\r\nimport musicmobile from './css/musicmobile.css'\r\n\r\nimport axios from 'axios'\r\nimport {Palette} from 'react-palette'\r\nimport Color from 'color'\r\n\r\nimport pause from '../icons/pause.png'\r\nimport play from '../icons/play.png'\r\nimport skiptrack from '../icons/skip-track.png'\r\n\r\nexport class Music extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        this.lyricsRef = React.createRef()\r\n        this.progressBarRef = React.createRef()\r\n        this.progressBarFilledRef = React.createRef()\r\n        this.state = {\r\n            lyrics: [\"No Music Playing\"],\r\n            artists: [\"No Music Playing...\"],\r\n            song_title: \"No Music Playing..\",\r\n            song_duration: 9999999,\r\n            album_img_url: \"\",\r\n            is_playing: false\r\n        }\r\n        this.song_progress = 0\r\n    }\r\n    componentDidMount() {\r\n        this.getPlaying()\r\n        \r\n        //Get the current playing song each second\r\n        this.refreshInterval = setInterval(() => this.getPlaying(), 3500)\r\n\r\n        //Update current duration of song every 50ms\r\n        this.durationInterval = setInterval(() => {\r\n            this.progressBarRef.current.value = this.song_progress\r\n            this.progressBarFilledRef.current.style.width = `${window.innerWidth * (this.song_progress / this.state.song_duration)}px`\r\n\r\n            if(this.state.is_playing) {\r\n                //If this song isnt finished, update progress\r\n                if(this.song_progress < this.state.song_duration) {\r\n                    this.song_progress += 25\r\n\r\n                    let songPercent = this.song_progress / this.state.song_duration\r\n                    \r\n                    //Scroll the lyrics to look at current lyrics\r\n                    let newScrollTop = (this.lyricsRef.current.scrollHeight * songPercent) - (window.innerHeight*.75)/2\r\n                    if(Math.abs(newScrollTop - this.lyricsRef.current.scrollTop) > 25/this.state.song_duration * this.lyricsRef.current.scrollHeight) {\r\n                        this.lyricsRef.current.scrollTo({\r\n                            top: newScrollTop,\r\n                            left: 0,\r\n                        })              \r\n                    } else {\r\n                        this.lyricsRef.current.scrollTo({\r\n                            top: newScrollTop,\r\n                            left: 0,\r\n                            behavior: 'smooth'\r\n                        })\r\n                    }   \r\n                } else {\r\n                    //else, get new song\r\n                    this.getPlaying()\r\n                }    \r\n            }    \r\n        }, 25)\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        clearInterval(this.refreshInterval)\r\n        clearInterval(this.durationInterval)\r\n    }\r\n\r\n    //Get lyrics to current song and sets the state to it\r\n    getPlayingLyrics = () => {\r\n        this.setState({...this.state, lyrics: [\"Loading...\"]})\r\n        axios.get('http://127.0.0.1:5000/api/v1/playing/lyrics', { params: {token: localStorage.getItem('access_token')}})\r\n            .then(res => {\r\n                this.setState({...this.state, lyrics: res.data})\r\n            })\r\n            .catch(error => console.log(error))\r\n    }\r\n    //Gets the current song playing, but not the lyrics\r\n    getPlaying = () => {    \r\n        //Get data  \r\n        axios.get('http://127.0.0.1:5000/api/v1/playing', { params: {token: localStorage.getItem('access_token')}})\r\n            .then(res => {\r\n                if(res.status === 200) {\r\n                    //Extracts the important info from data\r\n                    let artists = res.data['item']['artists'].map(artist => artist[\"name\"])\r\n                    let song_title = res.data['item']['name']\r\n                    let song_duration = res.data['item']['duration_ms']\r\n                    let song_progress = res.data['progress_ms']\r\n                    let album_img_url = res.data['item']['album']['images'][0]['url']\r\n                    let is_playing = res.data['is_playing']\r\n                    console.log(res.data)\r\n\r\n                    //Also gets the lyrics, if we found a different song playing\r\n                    if(artists !== this.state.artists && song_title !== this.state.song_title) {\r\n                        this.getPlayingLyrics()\r\n                    }\r\n                    \r\n                    //Sets values to the info extracted from data\r\n                    this.setState({...this.state, \r\n                        artists: artists, \r\n                        song_title: song_title,\r\n                        song_duration: song_duration,\r\n                        song_progress: song_progress,\r\n                        album_img_url: album_img_url,\r\n                        is_playing: is_playing\r\n                    })\r\n                    this.song_progress = song_progress\r\n                } \r\n                else if(res.status === 204) {\r\n                    this.song_progress = 0\r\n                    this.setState({...this.state, \r\n                        lyrics: [\"No Music Playing\"],\r\n                        artists: [\"No Music Playing...\"],\r\n                        song_title: \"No Music Playing..\",\r\n                        song_duration: 9999999,\r\n                        album_img_url: \"\",\r\n                        is_playing: false\r\n                    })\r\n                }\r\n            })\r\n            .catch(error => {\r\n                //If error, reauthenticate the user\r\n                this.props.getAndCheckToken()\r\n                console.log(error)\r\n            })\r\n    }\r\n\r\n    skipTrack = (type) => {\r\n        axios.get(`http://127.0.0.1:5000/api/v1/user/profile?token=${localStorage.getItem('access_token')}`)\r\n            .then(res => {\r\n                if(res.data['product'] === 'premium') {\r\n                    this.song_progress = 0\r\n                    this.setState({...this.state, \r\n                        lyrics: [\"Loading Lyrics\"],\r\n                        artists: [\"Loading...\"],\r\n                        song_title: \"Loading..\",\r\n                        song_duration: 9999999,\r\n                        album_img_url: \"\",\r\n                    })\r\n\r\n                    if (type == \"next\"|| type == \"previous\") {\r\n                        axios.post(`http://127.0.0.1:5000/api/v1/playing/skip/${type}?token=${localStorage.getItem('access_token')}`)\r\n                            .then(res => {\r\n                                setTimeout(() => {\r\n                                    this.getPlaying()\r\n                                }, 500)\r\n                            }) .catch(error => {\r\n                                this.props.getAndCheckToken()\r\n                                console.log(error)\r\n                            })\r\n                    }    \r\n                } else {\r\n                    window.alert(\"Sorry! This feature is only available to spotify premium users!\")\r\n                }\r\n            })\r\n            .catch(error => {\r\n                this.props.getAndCheckToken()\r\n                console.log(error)\r\n            })\r\n    }\r\n\r\n    pauseTrack = () => {\r\n        axios.get(`http://127.0.0.1:5000/api/v1/user/profile?token=${localStorage.getItem('access_token')}`)\r\n            .then(res => {\r\n                console.log(res.data)\r\n                if(res.data['product'] === 'premium') {\r\n                    let type = \"pause\"\r\n                    if(!this.state.is_playing) {\r\n                        type = \"unpause\"\r\n                        this.setState({...this.state, is_playing: true})\r\n                    } else {\r\n                        this.setState({...this.state, is_playing: false})\r\n                    }\r\n\r\n                    axios.put(`http://127.0.0.1:5000/api/v1/playing/${type}?token=${localStorage.getItem('access_token')}`)\r\n                        .then(res => {\r\n                            this.getPlaying()\r\n                        }) .catch(error => {\r\n                            this.props.getAndCheckToken()\r\n                            console.log(error)\r\n                        })\r\n                } else {\r\n                    window.alert(\"Sorry! This feature is only available to spotify premium users!\")\r\n                }\r\n            })\r\n            .catch(error => {\r\n                this.props.getAndCheckToken()\r\n                console.log(error)\r\n            })\r\n    }\r\n\r\n    //Renders each line of the song individually\r\n    renderLine = line => {\r\n        if(line.includes(\"[\")) {\r\n            return (\r\n                <p className='bold' style={{lineHeight: '20px'}}>{line.replace('[', '').replace(']', '')}</p>\r\n            )\r\n        } else {\r\n            return (\r\n                <p>{line}</p>\r\n            )\r\n        }\r\n    }\r\n\r\n    renderArtists = () => {\r\n        let str = this.state.artists[0]\r\n\r\n        this.state.artists.forEach((a, index) => {\r\n            if (index != 0) {\r\n                str += `, ${a}`\r\n            }\r\n        })\r\n        return str\r\n    }\r\n    renderPauseIcon = () => {\r\n        let is_playing = this.state.is_playing\r\n        console.log(is_playing)\r\n        if(is_playing) {\r\n            return <img src={pause}></img>\r\n        } else {\r\n            return <img src={play}></img>\r\n        }\r\n    }\r\n    render() {\r\n        return (\r\n            <div>\r\n                <Palette src={this.state.album_img_url}>\r\n                    {({ data, loading, error }) => (\r\n                        <div>\r\n                            <div className='lyrics' \r\n                                ref={this.lyricsRef} \r\n                                style={{/*backgroundColor: Color(data.muted).lighten(.9).hex().toString(), \r\n                                color:Color(data.darkVibrant).saturate(1).darken(.6).hex().toString()*/}} \r\n                            >\r\n                                    {this.state.lyrics.map(line => this.renderLine(line))}\r\n                            </div> \r\n                            <div className=\"song_info\" style={{/*backgroundColor:Color(data.muted).whiten(.2).lighten(.7).hex().toString(),\r\n                                                                color:Color(data.darkVibrant).saturate(1).darken(.6).hex().toString()*/}}\r\n                            >\r\n                                <div className=\"song-info-container\">\r\n                                    \r\n                                    <img className=\"album_img\" src={this.state.album_img_url}></img>\r\n                                    <div className=\"song-info-container2\">\r\n                                        <p className=\"song_title bold\">{this.state.song_title}</p>                       \r\n                                        <p className=\"artists\">{this.renderArtists()}</p>\r\n                                    </div>\r\n                                </div>\r\n                                \r\n                                <div className=\"music-player\">\r\n                                    <button className=\"skipnextbtn\" onClick={() => this.skipTrack(\"next\")}> <img src={skiptrack}></img> </button>\r\n                                    <button className=\"skippreviousbtn\" onClick={() => this.skipTrack(\"previous\")}> <img src={skiptrack}></img> </button>\r\n                                    <button className=\"pausebtn\" onClick={() => this.pauseTrack()}>{this.renderPauseIcon()}</button>\r\n                                    <input className=\"progress-bar\" ref={this.progressBarRef} type=\"range\" min=\"0\" max={this.state.song_duration} value={this.song_progress}></input>\r\n                                    <div className=\"progress-bar-filled\" ref={this.progressBarFilledRef} style={{width: `${window.innerWidth * (this.song_progress / this.state.song_duration)}px`}}></div>\r\n                                </div>\r\n                                \r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                    \r\n                </Palette> \r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Music\r\n\r\n/*<button className=\"skipnextbtn\" onClick={() => this.skipTrack(\"next\")}> <img src={skiptrack}></img> </button>\r\n                                <button className=\"skippreviousbtn\" onClick={() => this.skipTrack(\"previous\")}> <img src={skiptrack}></img> </button>\r\n                                <button className=\"pausebtn\" onClick={() => this.pauseTrack()}>{this.renderPauseIcon()}</button>\r\n\r\n                                <input className=\"progress-bar\" ref={this.progressBarRef} type=\"range\" min=\"0\" max={this.state.song_duration} value={this.song_progress}></input>\r\n                                <div className=\"progress-bar-filled\" ref={this.progressBarFilledRef} style={{width: `${window.innerWidth * (this.song_progress / this.state.song_duration)}px`}}></div>\r\n*/","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAQAAAD2e2DtAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAHdElNRQfkDBgKBy/4W08NAAAD9ElEQVR42u3Vv8vNYRjH8c/5EhkMJBZ5sthMzBaZjH4sUmJRBn+KyGDgTzCJUmKREpuFJ4PZExZyHh4uyxlOKM9yvtfJ+/36B+7ruu933UmSmtSZelhrNbZP9aQu1taMqA7WzXpb6yNvOq3Vul4Hxtx081eysx6M/vTzntW+0XY9X9PGTb/U2e7X/vNKJs3PX1X1vLaNsuvJ+tG86fc63v3iv1/K2e7Xr6qqqyNsur3eda9ZVW/G/fL+Zcil7hGSZJQpTmSle80kh3Kse4R5Q452j5AkOVw7Fn7Gke4lZ5bjxmeG7OoeYWb3f3DC5uzpHmDekEn3CDPLMgfM0D2AehkAnAHAGQCcAcAZAJwBwBkAnAHAGQCcAcAZAJwBwBkAnAHAGQCcAcAZAJwBwBkAnAHAGQCcAcAZAJwBwBkAnAHAGQCcAcAZAJwBwBkAnAHAGQCcAcAZAJwBwBkAnAHAGQCcAcAZAJwBwBkAnAHAGQCcAcAZAJwBwBkAnAHAGQCcAcAZAJwBwBkAnAHAGQCcAcAZAJwBwBkAnAHAGQCcAcAZAJwBwBkAnAHAGQCcAcAZAJwBwBkAnAHAGQCcAcAZAJwBwBkAnAHAGQCcAcAZAJwBwBkAnAHAGQCcAcAZAJwBwBkAnAHAGQCcAcAZAJwBwBkAnAHAGQCcAcAZAJwBwBkAnAHAGQCcAcAZAJwBwBkAnAHAGQCcAcAZAJwBwBkAnAHAGQCcAcAZAJwBwBkAnAHAGQCcAcAZAJwBwBkAnAHAGQCcAcAZAJwBwBkAnAHAGQCcAcAZAJwBwBkAnAHAGQCcAcAZAJwBwBkAnAHAGQCcAcAZAJwBwBkAnAHAGQCcAcAZAJwBwBkAnAHAGQCcAcAZAJwBwBkAnAHAGQCcAcAZAJwBwBkAnAHAGQCcAcAZAJwBwBkAnAHAGQCcAcAZAJwBwBkAnAHAGQCcAcAZAJwBwBkAnAHAGQCcAcAZAJwBwBkAnAHAGQCcAcAZAJwBwBkAnAHAGQCcAcAZAJwBwBkAnAHAGQCcAcAZAJwBwBkAnAHAGQCcAcAZAJwBwBkAnAHAGQCcAcAZAJwBwBkAnAHAGQCcAcAZAJwBwBkAnAHAGQCcAcAZAJwBwBkAnAHAGQCcAcAZAJwBwA2p7hFmlmUOmCEfu0dIklQ+LPyMxZ+wOWvdA8wb8rJ7hCTJq8l04Wcsx6bJi+4B5g253T1CkuTOCGc8yrvuNZOs5mn3CPOG3M397iHyPLcWf8jkW67kZ/OmG7k82Wie4Xe1s+5Vp6e1d7Rdz9XXxk0/1+nu1/77tUzqVD2o96NfyId6XBdqy6i7rtSNWq31kTed1uu6Vvu7X/pPvwATESILr/U2egAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMC0xMi0yNFQxMDowNzo0NyswMDowMCN8TX4AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjAtMTItMjRUMTA6MDc6NDcrMDA6MDBSIfXCAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,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\"","import React, { Component } from 'react'\nimport { BrowserRouter as Router, Switch, Route, Link, NavLink, Redirect } from 'react-router-dom'\nimport axios from 'axios'\n\nimport HomePage from './components/HomePage'\n\nimport './App.css';\nimport logout from './icons/logout.png'\n\nimport Music from './components/Music'\n\nexport class App extends Component {\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            authenticated: false\n        }\n    }\n\n    componentDidMount() {\n        this.getAndCheckToken()\n    }\n    //Checks if token is still valid, and if not, then get new token via refresh token. If refresh token does not work either, go back to login page\n    getAndCheckToken = () => {\n        //Checks if access token exists\n        if(localStorage.getItem('access_token') != null) {\n            let token = localStorage.getItem('access_token')\n            //Checks if token still valid\n            axios.get(`http://127.0.0.1:5000/api/v1/playing?token=${token}`)\n                .then(res => {\n                    //If still valid then the user is authenticated\n                    this.setState({...this.state, authenticated: true})\n                })\n                .catch(error => {\n                    //If not valid, get a new token via refresh\n                    let refresh_token = localStorage.getItem('refresh_token')\n                    this.getTokenByRefresh(refresh_token)\n                })\n        } else {\n            //If token doesnt exist then get token via code\n            let code = window.location.search.slice(6)\n            this.getTokenByCode(code)\n        }\n    }\n    getTokenByCode = code => {\n        axios.post(`http://127.0.0.1:5000/api/v1/auth/token/code?code=${code}`)\n            .then(res => {\n                console.log(res.data)\n                localStorage.setItem('access_token', res.data['access_token'])\n                localStorage.setItem('refresh_token', res.data['refresh_token'])\n                this.getAndCheckToken()\n            })\n            .catch(error => {\n                if(window.location.href != \"http://localhost:3000/\") {\n                    window.location.href = \"http://localhost:3000/\"\n                }\n            })\n    }\n    getTokenByRefresh = refresh_token => {\n        axios.post(`http://127.0.0.1:5000/api/v1/auth/token/refresh?refresh_token=${refresh_token}`)\n            .then(res => {\n                console.log(res.data)\n                localStorage.setItem('access_token', res.data['access_token'])\n                this.getAndCheckToken()\n            })\n            .catch(error => {\n                if(window.location.href != \"http://localhost:3000/\") {\n                    window.location.href = \"http://localhost:3000/\"\n                }\n            })\n    }\n    login = () => {\n        localStorage.clear()\n        this.setState({...this.state, authenticated: false})\n        axios.get('http://127.0.0.1:5000/api/v1/auth/login')\n            .then(res => {\n                let url = res.data\n                window.location.href = url\n            })\n            .catch(error => console.log(error))\n    }\n\n    logout = () => {\n        localStorage.clear()\n        this.setState({...this.state, authenticated: false})\n        window.location.href = \"http://localhost:3000/\"\n    }\n\n    renderLogout = () => {\n        return <button className=\"logoutbtn\" onClick={this.logout}>\n            <img src={logout}></img>\n        </button>\n    }\n    redirect = () => {\n        if(this.state.authenticated) {\n            return <Redirect to='/music'></Redirect>\n        } else {\n            return null\n        }\n    }\n\n    render() {\n        return (\n            <Router>\n                <div className='App'>\n                    {this.redirect()}\n                    <Switch>            \n                        <Route path = '/music' component={Music}>\n                            <Music getAndCheckToken={() => this.getAndCheckToken()}/>\n                            {this.renderLogout()}\n                        </Route>\n                        <Route path = '/'>\n                            <HomePage login={this.login.bind()}></HomePage>\n                        </Route>\n                    </Switch>\n                </div>\n            </Router>\n        )\n    }\n}\n\nexport default App\n","export default \"data:image/png;base64,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\"","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}